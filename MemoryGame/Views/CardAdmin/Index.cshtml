@model IEnumerable<MemoryGame.Models.Card>
@{
    ViewData["Title"] = "Cards";
}

<h2 class="mb-3">Cards</h2>

@if (TempData["Info"] != null)
{
    <div class="alert alert-info">@TempData["Info"]</div>
}
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <a asp-action="Create" class="btn btn-primary">Create New Card</a>
    <span class="text-muted">@((Model?.Count() ?? 0)) items</span>
</div>

@if (!(Model?.Any() ?? false))
{
    <div class="alert alert-secondary">
        No cards found. Click <strong>Create New Card</strong> to add your first one.
    </div>
}
else
{
    <table class="table table-striped align-middle">
        <thead>
            <tr>
                <th style="width:90px;">ID</th>
                <th>Name</th>
                <th>PairKey</th>
                <th style="width:200px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var c in Model!)
            {
                <tr>
                    <td>@c.CardID</td>
                    <td>@c.Name</td>
                    <td>@c.PairKey</td>
                    <td>
                        <div class="d-flex gap-2">
                            <a asp-action="Edit" asp-route-id="@c.CardID" class="btn btn-sm btn-outline-primary">Edit</a>

                            <form asp-action="Delete" method="post" class="m-0">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="id" value="@c.CardID" />
                                <button class="btn btn-sm btn-danger"
                                        type="submit"
                                        onclick="return confirm('Delete card #@c.CardID (@c.Name)?');">
                                    Delete
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
